<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ –≤–µ–ª–æ–ø–∞—Ä–∫–æ–≤–æ–∫ –ú–∏–Ω—Å–∫–∞</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–∞—Ä—Ç—ã, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –≤–∏–¥–∏–º–æ–π */
        #map { 
            height: 75vh; 
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ */
        .leaflet-popup-content-wrapper {
            border-radius: 0.5rem;
        }
        .leaflet-popup-content {
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            margin: 10px 15px;
            width: auto !important;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–æ–∫-–∫—Ä—É–∂–æ—á–∫–æ–≤ */
        .dot-icon {
            color: white;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 16px;
            line-height: 28px;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .parking-icon { background-color: #3b82f6; /* blue-500 */ }
        .restaurant-icon { background-color: #ef4444; /* red-500 */ }
        .regional-train-icon { background-color: #84cc16; /* lime-500 */ }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–∫–∏-—ç–º–æ–¥–∑–∏ */
        .emoji-icon {
            font-size: 24px;
            text-shadow: 0 0 3px #fff;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ù–∞–π—Ç–∏ –º–µ–Ω—è" */
        .leaflet-control-custom {
            cursor: pointer;
            background-color: white;
            width: 34px;
            height: 34px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 4px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.65);
        }
        .leaflet-control-custom:hover {
            background-color: #f3f4f6;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ popup */
        .popup-button {
            display: inline-flex;
            align-items: center;
            padding: 6px 10px;
            margin-top: 8px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            background-color: #f9fafb;
            transition: background-color 0.2s;
        }
        .popup-button:hover {
            background-color: #f3f4f6;
        }
        .popup-button svg {
            margin-right: 5px;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 font-sans p-4 md:p-8">

    <div class="max-w-7xl mx-auto bg-white p-6 rounded-lg shadow-lg relative">
        <div class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">–ö–∞—Ä—Ç–∞ –≤–µ–ª–æ–ø–∞—Ä–∫–æ–≤–æ–∫ –ú–∏–Ω—Å–∫–∞</h1>
            <p class="text-gray-600 mt-2">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –≤–µ–ª–æ–ø–∞—Ä–∫–æ–≤–∫–∏ –Ω–∞ –∞–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞—Ö. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ —Ü–µ–Ω—ã –≤–∑—è—Ç—ã —Å —Å–∞–π—Ç–∞ <a href="https://upgaip.by/veloparkovki" target="_blank" class="text-blue-500 hover:underline">–ì–û ¬´–ì–∞—Ä–∞–∂–∏, –∞–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∏ –∏ –ø–∞—Ä–∫–æ–≤–∫–∏¬ª</a>.</p>
        </div>
        
        <div id="map"></div>
        
        <div id="price-info" class="absolute top-20 right-8 md:top-24 md:right-10 bg-white bg-opacity-90 p-3 rounded-lg shadow-md z-[1000]">
            <h4 class="font-bold text-sm mb-1">–•—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞:</h4>
            <ul class="text-xs list-disc list-inside">
                <li><span class="font-semibold">–≤ —á–∞—Å:</span> 0,07 —Ä—É–±.</li>
                <li><span class="font-semibold">–≤ —Å—É—Ç–∫–∏:</span> 0,82 —Ä—É–±.</li>
                <li><span class="font-semibold">–≤ –º–µ—Å—è—Ü:</span> 12,00 —Ä—É–±.</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let userLocation = null;
            
            const bikeParkingData = [
                { lat: 53.8687, lng: 27.6533, address: '—É–ª. –í–∞—Å–Ω–µ—Ü–æ–≤–∞, 14', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 17' },
                { lat: 53.8407, lng: 27.6575, address: '—É–ª. –£–±–æ—Ä–µ–≤–∏—á–∞, 89', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 18' },
                { lat: 53.8765, lng: 27.6897, address: '—É–ª. –ê–ª—Ç–∞–π—Å–∫–∞—è, 1–≥', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 21' },
                { lat: 53.8415, lng: 27.6569, address: '—É–ª. –£–±–æ—Ä–µ–≤–∏—á–∞, 81', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 23' },
                { lat: 53.8559, lng: 27.6322, address: '—É–ª. –ú–∞–ª–∏–Ω–∏–Ω–∞, 1', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 46' },
                { lat: 53.8837, lng: 27.7121, address: '—É–ª. –ù–µ—Å—Ç–µ—Ä–æ–≤–∞, 47', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 71' },
                { lat: 53.8524, lng: 27.6749, address: '—É–ª. –†–æ—Ç–º–∏—Å—Ç—Ä–æ–≤–∞, 61', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 73' },
                { lat: 53.8810, lng: 27.7011, address: '—É–ª. –ò–ª–∏–º—Å–∫–∞—è, 10–∞', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 82' },
                { lat: 53.8452, lng: 27.5925, address: '–ò–≥—É–º–µ–Ω—Å–∫–∏–π —Ç—Ä–∞–∫—Ç, 14', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 36' },
                { lat: 53.8341, lng: 27.5939, address: '–ò–≥—É–º–µ–Ω—Å–∫–∏–π —Ç—Ä–∞–∫—Ç, 51', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 38' },
                { lat: 53.8683, lng: 27.6045, address: '—É–ª. –Ø–∫—É–±–æ–≤–∞, 9', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 41' },
                { lat: 53.8436, lng: 27.5878, address: '—É–ª. –°—ã—Ä–æ–∫–æ–º–ª–∏, 1', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 77' },
                { lat: 53.8340, lng: 27.5790, address: '—É–ª. –ü—Ä—É—à–∏–Ω—Å–∫–∏—Ö, 45', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 78' },
                { lat: 53.8519, lng: 27.5815, address: '—É–ª. –ü. –®–ø–∏–ª–µ–≤—Å–∫–æ–≥–æ, 50', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 91' },
                { lat: 53.8604, lng: 27.4687, address: '—É–ª. –†–∞—Ñ–∏–µ–≤–∞, 58', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 33' },
                { lat: 53.8679, lng: 27.4764, address: '–ø—Ä-—Ç –∏–º. –ì–∞–∑–µ—Ç—ã "–ó–≤–µ–∑–¥–∞", 49–∞', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 58' },
                { lat: 53.8513, lng: 27.4582, address: '—É–ª. –ù–∞–ø–æ–ª–µ–æ–Ω–∞ –û—Ä–¥—ã, 30', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 79' },
                { lat: 53.8559, lng: 27.4475, address: '—É–ª. –°–ª–æ–±–æ–¥—Å–∫–∞—è, 8', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 88' },
                { lat: 53.8559, lng: 27.4485, address: '—É–ª. –°–ª–æ–±–æ–¥—Å–∫–∞—è, 6', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 89' },
                { lat: 53.8732, lng: 27.4870, address: '—É–ª. –ê–ª–∏–±–µ–≥–æ–≤–∞, 1', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 107' },
                { lat: 53.8624, lng: 27.5303, address: '—É–ª. –ë–∞—Ä–∞–º–∑–∏–Ω–æ–π –¢.–ù., 5', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 4' },
                { lat: 53.8441, lng: 27.5367, address: '—É–ª. –ö–æ—Ä–∂–µ–Ω–µ–≤—Å–∫–æ–≥–æ, 16–¥', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 8' },
                { lat: 53.8828, lng: 27.5458, address: '—É–ª. –ú–æ–≥–∏–ª–µ–≤—Å–∫–∞—è, 36', description: '–û—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–æ—è—â–∞—è –≤–µ–ª–æ–ø–∞—Ä–∫–æ–≤–∫–∞ 5002' },
                { lat: 53.9038, lng: 27.6111, address: '—É–ª. –ö–ª—É–º–æ–≤–∞, 18', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 95' },
                { lat: 53.9317, lng: 27.6253, address: '—É–ª. –ö–Ω–æ—Ä–∏–Ω–∞, 59', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 27' },
                { lat: 53.9313, lng: 27.6416, address: '—É–ª. –ö–∞–ª–∏–Ω–æ–≤—Å–∫–æ–≥–æ, 117', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 29' },
                { lat: 53.9113, lng: 27.6006, address: '–ø–µ—Ä. –ö–æ–∑–ª–æ–≤–∞, 21', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 60' },
                { lat: 53.9438, lng: 27.6917, address: '—É–ª. –ê–∫–∞–¥–µ–º–∏–∫–∞ –í—ã—Å–æ—Ü–∫–æ–≥–æ, 54', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 101' },
                { lat: 53.9100, lng: 27.4200, address: '—É–ª. –ö–∞–º–µ–Ω–Ω–æ–≥–æ—Ä—Å–∫–∞—è', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 7' },
                { lat: 53.8967, lng: 27.4410, address: '—É–ª. –ú. –ì–æ—Ä–µ—Ü–∫–æ–≥–æ, 28–∞', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 31' },
                { lat: 53.8797, lng: 27.4429, address: '—É–ª. –®–∞—Ä–∞–Ω–≥–æ–≤–∏—á–∞, 79', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 37' },
                { lat: 53.9150, lng: 27.4646, address: '2-–π –ø–µ—Ä. –¢–∏–º–æ—à–µ–Ω–∫–æ, 5', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 53' },
                { lat: 53.8938, lng: 27.4172, address: '—É–ª. –õ–æ–±–∞–Ω–∫–∞, 114', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 54' },
                { lat: 53.9015, lng: 27.4334, address: '—É–ª. –ì–æ—Ä–µ—Ü–∫–æ–≥–æ, 6', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 65' },
                { lat: 53.9167, lng: 27.4608, address: '—É–ª. –¢–∏–º–æ—à–µ–Ω–∫–æ, 25', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 69' },
                { lat: 53.9167, lng: 27.4598, address: '—É–ª. –¢–∏–º–æ—à–µ–Ω–∫–æ, 27', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 70' },
                { lat: 53.8941, lng: 27.4042, address: '—É–ª. –ú–∞—Ä—à–∞–ª–∞ –õ–æ—Å–∏–∫–∞', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 87' },
                { lat: 53.9158, lng: 27.4384, address: '—É–ª. –í. –ì–æ–ª—É–±–∫–∞, 8', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 99' },
                { lat: 53.9174, lng: 27.4071, address: '—É–ª. –ö–∞–º–µ–Ω–Ω–æ–≥–æ—Ä—Å–∫–∞—è, 100–∞', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 108' },
                { lat: 53.9181, lng: 27.4217, address: '—É–ª. –ö–∞–º–µ–Ω–Ω–æ–≥–æ—Ä—Å–∫–∞—è, 62', description: '–û—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–æ—è—â–∞—è –≤–µ–ª–æ–ø–∞—Ä–∫–æ–≤–∫–∞ 5001' },
                { lat: 53.9298, lng: 27.5192, address: '—É–ª. –†–∞–¥—É–∂–Ω–∞—è, 5', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 56' },
                { lat: 53.9598, lng: 27.5358, address: '—É–ª. –ü. –ú–µ–¥—ë–ª–∫–∏, 13', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 110' },
                { lat: 53.9213, lng: 27.5756, address: '—É–ª. –ö—É–ª—å–º–∞–Ω, 46', description: '–ê–≤—Ç–æ—Å—Ç–æ—è–Ω–∫–∞ ‚Ññ 85' }
            ];
            
            const restaurantData = [
                { lat: 53.8706, lng: 27.5514, address: '—É–ª–∏—Ü–∞ –ë—Ä–∞—Ç—Å–∫–∞—è, 6–ê', description: '–†–µ—Å—Ç–æ—Ä–∞–Ω –ê–∑–∏–∞—Ç—Å–∫–æ–π –∫—É—Ö–Ω–∏'},
                { lat: 53.9607, lng: 27.6609, address: '—É–ª. –ê–≤–∏–∞—Ü–∏–æ–Ω–Ω–∞—è, 33, –ö–æ–ø–∏—â–µ', description: '–†–µ—Å—Ç–æ—Ä–∞–Ω –ê–∑–∏–∞—Ç—Å–∫–æ–π –∫—É—Ö–Ω–∏'},
                { lat: 53.9156, lng: 27.5694, address: '–ø—Ä-—Ç –ú–∞—à–µ—Ä–æ–≤–∞, 11', description: '–†–µ—Å—Ç–æ—Ä–∞–Ω –ê–∑–∏–∞—Ç—Å–∫–æ–π –∫—É—Ö–Ω–∏'}
            ];
            
            const trainStationData = [
                { lat: 53.89080795246477, lng: 27.55057607776055, description: '–ú–∏–Ω—Å–∫-–ü–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∏–π', address: '–ú–∏–Ω—Å–∫-–ü–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∏–π' },
                { lat: 53.87366109704399, lng: 27.520952369211034, description: '–æ.–ø. –°—Ç–æ–ª–∏—á–Ω—ã–π', address: '–æ.–ø. –°—Ç–æ–ª–∏—á–Ω—ã–π' },
                { lat: 53.80716779878691, lng: 27.580409861489155, description: '–ö–æ–ª—è–¥–∏—á–∏', address: '–ö–æ–ª—è–¥–∏—á–∏' },
                { lat: 53.850815518971764, lng: 27.55650533433975, description: '–õ–æ—à–∏—Ü–∞', address: '–õ–æ—à–∏—Ü–∞' },
                { lat: 53.86542540556702, lng: 27.560790994863694, description: '–ú–∏–Ω—Å–∫-–Æ–∂–Ω—ã–π', address: '–ú–∏–Ω—Å–∫-–Æ–∂–Ω—ã–π' },
                { lat: 53.905959318926925, lng: 27.525721694473233, description: '–ú–∏–Ω—Å–∫-–°–µ–≤–µ—Ä–Ω—ã–π', address: '–ú–∏–Ω—Å–∫-–°–µ–≤–µ—Ä–Ω—ã–π' },
                { lat: 53.93746492369188, lng: 27.442072402142504, description: '–õ–µ–±—è–∂–∏–π', address: '–õ–µ–±—è–∂–∏–π' },
                { lat: 53.947265162887206, lng: 27.426456948235515, description: '–ñ–¥–∞–Ω–æ–≤–∏—á–∏', address: '–ñ–¥–∞–Ω–æ–≤–∏—á–∏' },
                { lat: 53.890808114044965, lng: 27.585886336200137, description: '–ú–∏–Ω—Å–∫-–í–æ—Å—Ç–æ—á–Ω—ã–π', address: '–ú–∏–Ω—Å–∫-–í–æ—Å—Ç–æ—á–Ω—ã–π' },
                { lat: 53.898903512105655, lng: 27.622485297269773, description: '—Å—Ç. –¢—Ä–∞–∫—Ç–æ—Ä–Ω—ã–π –ó–∞–≤–æ–¥', address: '—Å—Ç. –¢—Ä–∞–∫—Ç–æ—Ä–Ω—ã–π –ó–∞–≤–æ–¥' },
                { lat: 53.91491074954863, lng: 27.66289406174532, description: '–°—Ç–µ–ø—è–Ω–∫–∞', address: '–°—Ç–µ–ø—è–Ω–∫–∞' },
                { lat: 53.93275924402853, lng: 27.716394584714823, description: '–û–∑–µ—Ä–∏—â–µ', address: '–û–∑–µ—Ä–∏—â–µ' }
            ];

            const regionalTrainStationData = [
                // –ë—Ä–µ—Å—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
                { lat: 52.2033, lng: 24.7872, description: "–ê–Ω—Ç–æ–ø–æ–ª—å", address: "–≥.–ø. –ê–Ω—Ç–æ–ø–æ–ª—å, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, 162" },
                { lat: 53.1203, lng: 26.0253, description: "–ë–∞—Ä–∞–Ω–æ–≤–∏—á–∏-–ü–æ–ª–µ—Å—Å–∫–∏–µ", address: "–≥. –ë–∞—Ä–∞–Ω–æ–≤–∏—á–∏, —É–ª. –§—Ä–æ–ª–µ–Ω–∫–æ–≤–∞, 13" },
                { lat: 53.1369, lng: 26.0025, description: "–ë–∞—Ä–∞–Ω–æ–≤–∏—á–∏-–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ", address: "–≥. –ë–∞—Ä–∞–Ω–æ–≤–∏—á–∏, —É–ª. –í–∏–ª—å—á–∫–æ–≤—Å–∫–æ–≥–æ, 5–∞" },
                { lat: 52.5511, lng: 24.9786, description: "–ë–µ–ª–æ–æ–∑–µ—Ä—Å–∫", address: "–≥. –ë–µ–ª–æ–æ–∑—ë—Ä—Å–∫, —É–ª. –®–æ—Å—Å–µ–π–Ω–∞—è, 9" },
                { lat: 52.4939, lng: 24.9703, description: "–ë–µ—Ä–µ–∑–∞-–ì–æ—Ä–æ–¥", address: "–≥. –ë–µ—Ä—ë–∑–∞, —É–ª. –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è, 16–ê" },
                { lat: 52.5539, lng: 24.9089, description: "–ë–µ—Ä–µ–∑–∞-–ö–∞—Ä—Ç—É–∑—Å–∫–∞—è", address: "–∞–≥. –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è, —É–ª. –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è, 6" },
                { lat: 52.0833, lng: 23.75, description: "–ë—Ä–µ—Å—Ç-–í–æ—Å—Ç–æ—á–Ω—ã–π", address: "–≥. –ë—Ä–µ—Å—Ç, —É–ª. –°–∫—Ä–∏–ø–Ω–∏–∫–æ–≤–∞, 112" },
                { lat: 52.0792, lng: 23.6847, description: "–ë—Ä–µ—Å—Ç-–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π", address: "–≥. –ë—Ä–µ—Å—Ç, –ø–ª. –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è, 1" },
                // –í–∏—Ç–µ–±—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
                { lat: 55.9388, lng: 28.8924, description: "–ê–ª—ë—â–∞", address: "–¥. –ê–ª—ë—â–∞, –ú–∞–ª–æ—Å–∏—Ç–Ω—è–Ω—Å–∫–∏–π —Å–µ–ª—å—Å–æ–≤–µ—Ç" },
                { lat: 55.8425, lng: 27.6433, description: "–ë–∏–≥–æ—Å–æ–≤–æ", address: "–¥. –ë–∏–≥–æ—Å–æ–≤–æ" },
                { lat: 54.8436, lng: 30.1983, description: "–ë–æ–≥—É—à–µ–≤—Å–∫–∞—è", address: "–≥.–ø. –ë–æ–≥—É—à–µ–≤—Å–∫, —É–ª. –ì–æ—Ä–±—É–Ω–æ–≤–∞, 1" },
                { lat: 55.7761, lng: 28.2869, description: "–ë–æ—Ä–∫–æ–≤–∏—á–∏", address: "–ø. –ë–æ—Ä–∫–æ–≤–∏—á–∏, —É–ª. –í–æ–∫–∑–∞–ª—å–Ω–∞—è" },
                { lat: 54.9186, lng: 28.5036, description: "–ë–æ—Ä–æ–≤–æ–µ", address: "–¥. –ë–æ—Ä–æ–≤–æ–µ" },
                { lat: 54.5167, lng: 30.0333, description: "–ë—É—Ä–±–∏–Ω", address: "–¥. –°—Ç–∞—Ä–∞—è –ë–µ–ª–∏—Ü–∞" },
                { lat: 55.7869, lng: 27.9519, description: "–í–µ—Ä—Ö–Ω–µ–¥–≤–∏–Ω—Å–∫", address: "–¥. –ë–æ—Ä–æ–≤–∫–∞, —É–ª. –ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è, 15" },
                { lat: 55.1953, lng: 30.2028, description: "–í–∏—Ç–µ–±—Å–∫", address: "–≥. –í–∏—Ç–µ–±—Å–∫, —É–ª. –ö–æ—Å–º–æ–Ω–∞–≤—Ç–æ–≤, 10–∞" },
                { lat: 55.23, lng: 30.17, description: "–í–∏—Ç—å–±–∞", address: "–í–∏—Ç–µ–±—Å–∫–∏–π —Ä–∞–π–æ–Ω" },
                { lat: 55.1983, lng: 27.925, description: "–í–æ—Ä–æ–ø–∞–µ–≤–æ", address: "–≥.–ø. –í–æ—Ä–æ–ø–∞–µ–≤–æ" },
                { lat: 55.0803, lng: 28.4983, description: "–ì–ª—É–±–æ–∫–æ–µ", address: "–≥. –ì–ª—É–±–æ–∫–æ–µ, —É–ª. –ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è, 12–ê" },
                { lat: 55.6167, lng: 29.7, description: "–ì–æ—Ä–æ–¥–æ–∫", address: "–≥. –ì–æ—Ä–æ–¥–æ–∫, —É–ª. –í–æ–∫–∑–∞–ª—å–Ω–∞—è" },
                { lat: 55.7, lng: 27.05, description: "–î—Ä—É—è", address: "–∞–≥. –î—Ä—É—è" },
                { lat: 55.7958, lng: 29.9525, description: "–ï–∑–µ—Ä–∏—â–µ", address: "–≥.–ø. –ï–∑–µ—Ä–∏—â–µ, —É–ª. –õ–µ–Ω–∏–Ω—Å–∫–∞—è, 3" },
                // –ì–æ–º–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
                { lat: 52.4342, lng: 30.9841, description: "–ì–æ–º–µ–ª—å", address: "–≥. –ì–æ–º–µ–ª—å, –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, 3" },
                { lat: 52.5786, lng: 30.9994, description: "–ö–æ—Å—Ç—é–∫–æ–≤–∫–∞", address: "–≥. –ì–æ–º–µ–ª—å, —É–ª. –ï—Ä—ë–º–∏–Ω—Å–∫–∞—è" },
                { lat: 52.4042, lng: 30.9758, description: "–ù–æ–≤–æ–±–µ–ª–∏—Ü–∫–∞—è", address: "–≥. –ì–æ–º–µ–ª—å, —É–ª. –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è, 33" },
                { lat: 52.4339, lng: 31.025, description: "–ì–æ–º–µ–ª—å-–ù–µ—á–µ—Ç–Ω—ã–π", address: "–≥. –ì–æ–º–µ–ª—å" },
                { lat: 52.0458, lng: 29.245, description: "–ú–æ–∑—ã—Ä—å", address: "–≥. –ú–æ–∑—ã—Ä—å" },
                // –ì—Ä–æ–¥–Ω–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
                { lat: 53.68, lng: 23.83, description: "–ì—Ä–æ–¥–Ω–æ", address: "–≥. –ì—Ä–æ–¥–Ω–æ, —É–ª. –ë—É–¥—ë–Ω–Ω–æ–≥–æ, 37" },
                { lat: 53.6669, lng: 23.8828, description: "–ê—É–ª—å—Å", address: "–≥. –ì—Ä–æ–¥–Ω–æ, —É–ª. –ê—É–ª—å—Å–∫–∞—è, 5–ë" },
                { lat: 53.655, lng: 23.7719, description: "–õ–æ—Å–æ—Å–Ω–æ", address: "–≥. –ì—Ä–æ–¥–Ω–æ, —É–ª. –°—É–≤–æ—Ä–æ–≤–∞, 76–ê" },
                { lat: 53.89, lng: 25.3, description: "–õ–∏–¥–∞", address: "–≥. –õ–∏–¥–∞, —É–ª. –¢—Ä—É—Ö–∞–Ω–æ–≤–∞, 10–í" },
                // –ú–æ–≥–∏–ª–µ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
                { lat: 53.9031, lng: 30.3419, description: "–ú–æ–≥–∏–ª—ë–≤ I", address: "–≥. –ú–æ–≥–∏–ª—ë–≤, –ü—Ä–∏–≤–æ–∫–∑–∞–ª—å–Ω–∞—è –ø–ª–æ—â–∞–¥—å, 1" },
                { lat: 53.8767, lng: 30.3664, description: "–ú–æ–≥–∏–ª—ë–≤ II", address: "–≥. –ú–æ–≥–∏–ª—ë–≤" },
                { lat: 53.9214, lng: 30.3808, description: "–õ—É–ø–æ–ª–æ–≤–æ", address: "–≥. –ú–æ–≥–∏–ª—ë–≤" },
                { lat: 53.1433, lng: 29.2131, description: "–ë–æ–±—Ä—É–π—Å–∫", address: "–≥. –ë–æ–±—Ä—É–π—Å–∫, —É–ª. –ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è, 13" },
                // –ú–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å
                { lat: 54.31, lng: 26.85, description: "–ú–æ–ª–æ–¥–µ—á–Ω–æ", address: "–≥. –ú–æ–ª–æ–¥–µ—á–Ω–æ, —É–ª. –í–æ–∫–∑–∞–ª—å–Ω–∞—è, 1" },
                { lat: 54.23, lng: 28.51, description: "–ë–æ—Ä–∏—Å–æ–≤", address: "–≥. –ë–æ—Ä–∏—Å–æ–≤, —É–ª. –¢—Ä—É–¥–∞, 7–∞" },
                { lat: 53.02, lng: 27.55, description: "–°–ª—É—Ü–∫", address: "–≥. –°–ª—É—Ü–∫, —É–ª. –í–æ–∫–∑–∞–ª—å–Ω–∞—è, 1" },
                { lat: 52.78, lng: 27.54, description: "–°–æ–ª–∏–≥–æ—Ä—Å–∫", address: "–≥. –°–æ–ª–∏–≥–æ—Ä—Å–∫, —É–ª. –õ–µ–Ω–∏–Ω—Å–∫–æ–≥–æ –ö–æ–º—Å–æ–º–æ–ª–∞, 38" }
            ];
            
            const streets = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '¬© <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>' });
            const satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { attribution: 'Tiles ¬© Esri' });
            const dark = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', { attribution: '¬© <a href="https://carto.com/attributions">CARTO</a>', subdomains: 'abcd', maxZoom: 20 });
            
            const map = L.map('map', { center: [53.9024, 27.5618], zoom: 11, layers: [streets] });

            const parkingIcon = L.divIcon({ html: 'P', className: 'dot-icon parking-icon', iconSize: [28, 28], iconAnchor: [14, 28], popupAnchor: [0, -28] });
            const restaurantIcon = L.divIcon({ html: 'N', className: 'dot-icon restaurant-icon', iconSize: [28, 28], iconAnchor: [14, 28], popupAnchor: [0, -28] });
            const trainStationIcon = L.divIcon({ html: 'üöÇ', className: 'emoji-icon', iconSize: [24, 24], iconAnchor: [12, 12] });
            const regionalTrainIcon = L.divIcon({ html: 'T', className: 'dot-icon regional-train-icon', iconSize: [28, 28], iconAnchor: [14, 28], popupAnchor: [0, -28] });
            
            const createPopupContent = (item) => `
                <div class="font-sans">
                    <p class="font-bold text-base">${item.description}</p>
                    <p class="text-gray-600">${item.address}</p>
                    <div class="mt-2 flex space-x-2">
                        <button class="popup-button route-btn" data-lat="${item.lat}" data-lng="${item.lng}">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" /></svg>
                            –ú–∞—Ä—à—Ä—É—Ç
                        </button>
                        <button class="popup-button copy-btn" data-address="${item.address}">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
                            –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                    </div>
                </div>
            `;
            
            const parkingLayer = L.layerGroup();
            bikeParkingData.forEach(parking => L.marker([parking.lat, parking.lng], { icon: parkingIcon }).bindPopup(createPopupContent(parking)).addTo(parkingLayer));
            parkingLayer.addTo(map);

            const restaurantLayer = L.layerGroup();
            restaurantData.forEach(restaurant => L.marker([restaurant.lat, restaurant.lng], { icon: restaurantIcon }).bindPopup(createPopupContent(restaurant)).addTo(restaurantLayer));
            restaurantLayer.addTo(map);
            
            const trainLayer = L.layerGroup();
            trainStationData.forEach(station => L.marker([station.lat, station.lng], { icon: trainStationIcon }).bindPopup(createPopupContent(station)).addTo(trainLayer));
            trainLayer.addTo(map);
            
            const regionalTrainLayer = L.layerGroup();
            regionalTrainStationData.forEach(station => L.marker([station.lat, station.lng], { icon: regionalTrainIcon }).bindPopup(createPopupContent(station)).addTo(regionalTrainLayer));
            // Layer is off by default for better performance
            // regionalTrainLayer.addTo(map);


            const baseMaps = { "–£–ª–∏—Ü—ã": streets, "–°–ø—É—Ç–Ω–∏–∫": satellite, "–¢—ë–º–Ω–∞—è": dark };
            const overlayMaps = { 
                "–í–µ–ª–æ–ø–∞—Ä–∫–æ–≤–∫–∏": parkingLayer, 
                "Noodles": restaurantLayer, 
                "–ñ/–î –°—Ç–∞–Ω—Ü–∏–∏ (–ú–∏–Ω—Å–∫)": trainLayer,
                "–ñ/–î –°—Ç–∞–Ω—Ü–∏–∏ (–†–µ–≥–∏–æ–Ω—ã)": regionalTrainLayer
            };
            L.control.layers(baseMaps, overlayMaps, { position: 'bottomleft' }).addTo(map);

            map.on('popupopen', function(e) {
                const popupNode = e.popup.getElement();
                const routeBtn = popupNode.querySelector('.route-btn');
                const copyBtn = popupNode.querySelector('.copy-btn');
                if (routeBtn) {
                    routeBtn.onclick = function() {
                        const lat = this.dataset.lat;
                        const lng = this.dataset.lng;
                        if (userLocation) {
                            window.open(`https://www.google.com/maps/dir/?api=1&origin=${userLocation.lat},${userLocation.lng}&destination=${lat},${lng}&travelmode=bicycling`, '_blank');
                        } else {
                            showNotification('–°–Ω–∞—á–∞–ª–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Å–≤–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.');
                        }
                    };
                }
                if (copyBtn) {
                    copyBtn.onclick = function() {
                        const address = this.dataset.address;
                        const textArea = document.createElement("textarea");
                        textArea.value = address;
                        document.body.appendChild(textArea);
                        textArea.select();
                        try {
                            document.execCommand('copy');
                            showNotification(`–ê–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ${address}`);
                        } catch (err) {
                            showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å.');
                        }
                        document.body.removeChild(textArea);
                    };
                }
            });

            const LocateControl = L.Control.extend({
                options: { position: 'topleft' },
                onAdd: function (map) {
                    const container = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');
                    container.title = '–ù–∞–π—Ç–∏ –º–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ';
                    container.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>`;
                    L.DomEvent.disableClickPropagation(container);
                    container.onclick = () => map.locate({ setView: true, maxZoom: 16 });
                    return container;
                }
            });
            map.addControl(new LocateControl());

            let userLocationMarker = null;
            let userLocationCircle = null;

            map.on('locationfound', function(e) {
                userLocation = e.latlng;
                if (userLocationMarker) map.removeLayer(userLocationMarker);
                if (userLocationCircle) map.removeLayer(userLocationCircle);
                const radius = e.accuracy;
                userLocationMarker = L.marker(e.latlng).addTo(map).bindPopup(`–í—ã –≥–¥–µ-—Ç–æ –∑–¥–µ—Å—å (–≤ —Ä–∞–¥–∏—É—Å–µ ${Math.round(radius)} –º–µ—Ç—Ä–æ–≤)`).openPopup();
                userLocationCircle = L.circle(e.latlng, radius).addTo(map);
            });
            map.on('locationerror', () => showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.'));

            function showNotification(text) {
                const notification = document.createElement('div');
                notification.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: white; padding: 12px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 2000; font-family: "Inter", sans-serif; font-size: 14px;';
                notification.textContent = text;
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }
        });
    </script>
</body>
</html>
